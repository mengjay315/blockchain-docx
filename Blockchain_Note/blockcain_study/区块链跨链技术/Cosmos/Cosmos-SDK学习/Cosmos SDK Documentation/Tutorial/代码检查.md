# 代码检查
## 错误1：
**- /home/gaojie/gopath/src/github.com/best-jie/nameservice/x/nameservice/module.go**

![](_v_images/20190617184028878_926190000.png)

![](_v_images/20190617184213641_1562610526.png)

disable 错误检查后，错误消失

## 错误2：

![](_v_images/20190617184609574_2090644593.png)

![](_v_images/20190617184629045_286053711.png)

我在/home/gaojie/gopath/src/github.com/cosmos/cosmos-sdk/types/invariant.go文件中找到了类似的：

![](_v_images/20190617190457294_1946545102.png)

我改成了这个，错误是没了。目前还没测试，不知道对不对？

另外，这个函数有什么作用？看着是不做任何操作。

![](_v_images/20190617190521759_768641323.png)

## 错误：3

**/home/gaojie/gopath/src/github.com/best-jie/nameservice/x/nameservice/client/cli/query.go**

![](_v_images/20190617191623996_235326544.png)

##### v0.33.0版本的cosmos-sdk关于 QueryWithData函数的定义：是传入两个参数返回两个值

![](_v_images/20190617232421821_1234105027.png)








##### 这个QueryWithData函数定义的地方：/cosmos-sdk/client/query.go(新版本的cosmos-sdk)，新版本是传入2个，返回3个
![](_v_images/20190617191719005_874439804.png)

##### 凡是调用了QueryWithData函数的地方都会出现这个错误，还有就是这个函数返回值有三个，为什么凡是调用该函数地方，返回值都没有第二个参数，返回的参数不用可以不写出吗？如果不用的话，难道不应该是用` _`表示吗？
##### 到底是cosmos sdk定义这个函数时参数弄错了，还是在这里调用时传递的参数不该有`queryRoute`

## 错误3:

**`/home/gaojie/gopath/src/github.com/best-jie/nameservice/x/nameservice/client/rest/rest.go`**

![](_v_images/20190617192941988_1829337842.png)

凡是调用`QueryWithDta`这个函数返回的err类型都不对，因为只返回了两个值，

Error的错误，发现提示`err`是`int64类型`，而err实际上是一个接口类型 ` var err error`

我尝试了一下，因为返回值是三个,第二个是int64类型的，在这里只返回了2个值，第一个和第二个，这里把err当成了int64类型的，因此不能调用接口下的Error()方法。

![](_v_images/20190617193541860_558533995.png)

##### PostProcessResponse函数只有三个参数，第一个是接口，第二个是结构体，第三个是空接口(即任意类型)，而这里却传入了4个参数，只有第一个和最后一个类型上对的上，中间的两个都不是结构体，

这是最新的cosmos-sdk版本这个函数的定义：新版本只有三个参数
![](_v_images/20190617193855715_671774641.png)

这是v0.33.0版本的cosmos-sdk，在0.33.0确实传入的是4个参数

![](_v_images/20190617225244069_1202650945.png)

我修改成了3个参数：

![](_v_images/20190617225729519_138401049.png)



## 错误4：

**/home/gaojie/gopath/src/github.com/best-jie/nameservice/cmd/nscli/main.go**

![](_v_images/20190617215628687_15854179.png)



**github.com/cosmos/cosmos-sdk/client/routes.go**,这是cosmos-sdk定义该函数的文件,v0.33.0版本中这个目录下，就没有这个routes.go文件，

新版本中才有

![](_v_images/20190617220525927_654943138.png)



![](_v_images/20190617215657637_1734064808.png)


**github.com/cosmos/cosmos-sdk/types/module/module.go**，这是cosmos-sdk定义该函数的文件

![](_v_images/20190617220603182_217825071.png)


## 错误5：

**/home/gaojie/gopath/src/github.com/best-jie/nameservice/x/nameservice/client/rest/rest.go**

![](_v_images/20190617230613102_2115212284.png)

![](_v_images/20190617230656362_2115494653.png)


**github.com/cosmos/cosmos-sdk/client/rest/rest.go,**在新版本的sdk中有四个参数
![](_v_images/20190617230759824_1312234687.png)

![](_v_images/20190617231248104_492861749.png)

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

# 以下是开始build并且运行所遇到的问题
## 错误6：

##### make install

![](_v_images/20190618081626263_1098888176.png)

问题是cosmos-sdk版本的问题，因为新版本和v0.33.0版本的函数定义不太一样，我把go.nd中的关于cosmos-sdk老版本的删除之后，再次make install, 又出错了

![](_v_images/20190618083701095_1898423188.png)

![](_v_images/20190618085026710_575221134.png)


我把我原来发现的错误又恢复到原来的样子后，Goland编译器上显示是有错误，但是make install 完成了，没有出错

nscli和nsd二进制可执行文件被安装到了$GOBIN目录下。

![](_v_images/20190618085257722_1422969149.png)

![](_v_images/20190618085653073_572409347.png)


![](_v_images/20190618085722123_1791846939.png)

