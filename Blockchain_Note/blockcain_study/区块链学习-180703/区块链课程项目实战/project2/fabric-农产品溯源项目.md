# fabric-农产品溯源项目
## 项目概述
    区块链技术应用于农产品的生产、检测、流通、销售全流程，结合物联网、大数据等技术，实现追踪溯源与品质保障。
    区块链作为全新的去中心化信任机制与分布式记账体系，已经逐渐被各行各业所认可。

![](_v_images/20190310100333471_1555389344.png)

## 行业痛点
    1）重工业企业排放的大量废气、废物、废水；
    2）土地分散化，非标准化种植，单纯追求产量，违规种植；
    3）陈米、毒米再加工，流通环节问题多。
    …
## 为什么会选择北大荒大米作为农产品溯源项目的试点？
    东北的土地相对来说比较集中化，都是标准化种植，机械化成程度高， 各个环节的数据采集比较方便，之所以不从生鲜类入手，因为它的产地不集中，非标准化种植，产品达不到要求。
    农产品的溯源项目相比其他溯源项目要复杂，环节比较多，比如从最开始的选种，土地的施肥，种植，中间管理，收割，收购，检测，仓储，运输，销售，要保证最终到消费者手中的产品是好的，难么要从源头数据记录开始，如何进行数据采集是关键，结合物联网，大数据技术，可以实现数据的精准采集，接着就是数据上链，
    什么数据上链，如果所有数据上链，那么将需要巨大的存储，而区块链本身不是一个分布式数据库，因此不能所有数据上链，对于上链的数据，最好是能够采集完后自动上链，避免人为作弊。

## 项目构成
    “平台+基地+农户”，激活产业数据和粮食产能，解决粮食供给问题。
    用区块链保障粮食的安全，淘汰问题粮，保障品质粮
    
    手持IOT设备（粮食数据准确）区块链（锁定粮食品质）、
    
    核心数据锁定在区块链上:
    时间戳（产品各个环节的时间节点）
    地理戳（锁定原产地）
    品质戳（保障品质）
    
    智能合约:
    收购智能合约
    反补智能合约

## 项目构成
![](_v_images/20190310102305386_1348994320.png)

## 核心技术
![](_v_images/20190310102342215_2073437527.png)

### 底层存储
    区块链并不是分布式数据库，不能存储所有数据，因此，要降低数据采集的频度，减少无用的数据。另外，大米一年的收成完成后，这条链上的数据不是那么重要，也不能说废弃掉， 而是把数据做一个备份存储起来，把核心的数据拿出来，新的一年开始一个新链。
    区块链数据的读取有一定的效率限制，一部分数据上链，而一部分数据缓存在数据库中，像redis数据库，可以实现快速读取。
##### 索引：
    区块链不是数据库，不能建立索引，建立索引有两种方式：
    1.把区块链的部分数据拿到一个中心化的服务器里，做一个索引服务器，为了保证和链上的数据一致，可以根据数据的hash值去验证是否一致。
    2.fabric本身的存储是k-v存储，可以通过键值对查询，在设计键值对查询时加入一些搜索设计，方便查询。

### 数据同步机制
    主要是orderer节点，orderer节点负责数据的排序，产生区块，如果某个orderer节点的网络不是很好，那么将影响数据的同步，
    该项目开始采用的是阿里云的服务器，多个orderer节点分布在不同的地区，后期，为了数据同步不受影响，还是要搭建一个机房，或者内网，让所有orderer节点处于同一网络环境下，那么数据同步将不会出现网络快慢的问题。

### 技术特色
    采用kafka机制，数据吞吐量还是可以的，提高了效率，满足了行业需求

## 项目后期的应用场景
![](_v_images/20190310105634747_547603832.png)

## 平台架构
![](_v_images/20190310161420468_1447719001.png)

## 项目DEMO
开发内容：

    1.存证
    2.溯源
    3.智能合约
    
    部署步骤
    1.Solo
    2.生产环境
    
    详细的分析见课堂笔记-190218:项目2-1的分析
